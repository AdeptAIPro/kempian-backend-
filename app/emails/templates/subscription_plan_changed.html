<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ subject }}</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #007bff; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }
        .content { background: #f8f9fa; padding: 30px; border-radius: 0 0 8px 8px; border: 1px solid #dee2e6; }
        .change-box { background: white; padding: 20px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #007bff; }
        .upgrade { border-left-color: #28a745; }
        .downgrade { border-left-color: #ffc107; }
        .plan-comparison { background: #e3f2fd; padding: 15px; border-radius: 6px; margin: 20px 0; }
        .footer { text-align: center; margin-top: 30px; color: #666; font-size: 14px; }
        .button { display: inline-block; background: #007bff; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin: 10px 0; }
        .highlight { color: #28a745; font-weight: bold; }
        .plan-name { font-size: 20px; font-weight: bold; color: #007bff; }
        .change-type { font-size: 18px; font-weight: bold; }
        .upgrade-text { color: #28a745; }
        .downgrade-text { color: #ffc107; }
        .change-title { margin-top: 0; }
        .upgrade-title { color: #28a745; }
        .downgrade-title { color: #ffc107; }
        .default-title { color: #007bff; }
    </style>
</head>
<body>
    <div class="header">
        <h1 style="margin: 0; font-size: 24px;">ðŸ“‹ Plan Change Confirmed</h1>
        <p style="margin: 10px 0 0 0; font-size: 16px;">Your subscription has been updated</p>
    </div>
    
    <div class="content">
        <p style="font-size: 16px; margin-bottom: 20px;">Dear {{ user_name }},</p>
        
        <p style="font-size: 16px; margin-bottom: 20px;">
            Your subscription plan has been successfully {{ change_type }}d. 
            {% if change_type == 'upgrade' %}
            You now have access to more features and higher limits!
            {% elif change_type == 'downgrade' %}
            Your plan has been adjusted to better fit your needs.
            {% endif %}
        </p>
        
        <div class="change-box {% if change_type == 'upgrade' %}upgrade{% elif change_type == 'downgrade' %}downgrade{% endif %}">
            <h3 class="change-title {% if change_type == 'upgrade' %}upgrade-title{% elif change_type == 'downgrade' %}downgrade-title{% else %}default-title{% endif %}">
                Plan Change Details
            </h3>
            <p><strong>Change Type:</strong> <span class="change-type {% if change_type == 'upgrade' %}upgrade-text{% elif change_type == 'downgrade' %}downgrade-text{% endif %}">{{ change_type|title }}</span></p>
            <p><strong>From Plan:</strong> {{ from_plan_name }}</p>
            <p><strong>To Plan:</strong> <span class="plan-name">{{ to_plan_name }}</span></p>
            <p><strong>Effective Date:</strong> {{ effective_date }}</p>
            {% if proration_amount %}
            <p><strong>Proration Amount:</strong> <span class="highlight">{{ proration_amount }}</span></p>
            {% endif %}
            {% if reason %}
            <p><strong>Reason:</strong> {{ reason }}</p>
            {% endif %}
        </div>
        
        <div class="plan-comparison">
            <h4 style="margin-top: 0; color: #1976d2;">New Plan Features</h4>
            <ul style="margin: 10px 0; padding-left: 20px;">
                <li><span class="highlight">{{ new_jd_quota }}</span> Job Description searches per month</li>
                <li><span class="highlight">{{ new_max_subaccounts }}</span> Sub-accounts</li>
                {% if change_type == 'upgrade' %}
                <li>Access to advanced features</li>
                <li>Priority support</li>
                <li>Enhanced analytics</li>
                {% endif %}
            </ul>
        </div>
        
        {% if change_type == 'upgrade' %}
        <div style="background: #d4edda; padding: 15px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #28a745;">
            <h4 style="margin-top: 0; color: #155724;">ðŸŽ‰ Welcome to Your New Plan!</h4>
            <p style="margin: 10px 0; color: #155724;">
                You now have access to all the premium features. Start exploring your enhanced capabilities right away!
            </p>
        </div>
        {% elif change_type == 'downgrade' %}
        <div style="background: #fff3cd; padding: 15px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #ffc107;">
            <h4 style="margin-top: 0; color: #856404;">Plan Adjustment Notice</h4>
            <p style="margin: 10px 0; color: #856404;">
                Your plan has been adjusted. Some features may no longer be available. 
                You can upgrade again anytime from your dashboard.
            </p>
        </div>
        {% endif %}
        
        <div style="text-align: center; margin: 30px 0;">
            <a href="{{ dashboard_url }}" class="button">View Your Dashboard</a>
        </div>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin: 20px 0;">
            <h4 style="margin-top: 0; color: #495057;">Important Information</h4>
            <ul style="margin: 10px 0; padding-left: 20px;">
                <li>Changes take effect immediately</li>
                <li>Your next billing cycle will reflect the new plan pricing</li>
                <li>You can make additional changes anytime from your dashboard</li>
                <li>Contact support if you have any questions about your new plan</li>
            </ul>
        </div>
        
        <p style="font-size: 16px; margin-bottom: 20px;">
            If you have any questions about this change or need assistance with your new plan, 
            please don't hesitate to contact our support team.
        </p>
        
        <p style="font-size: 16px; margin-bottom: 0;">
            Best regards,<br>
            The Talent-Match Team
        </p>
    </div>
    
    <div class="footer">
        <p>This is an automated notification. Please keep this email for your records.</p>
        <p>Need help? Contact us at <a href="mailto:support@talent-match.com">support@talent-match.com</a></p>
    </div>
</body>
</html>
