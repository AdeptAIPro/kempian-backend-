# Jobvite Integration - Environment Variables Template
# Copy this file to .env and fill in the values

# ============================================
# AWS S3 Configuration (for document storage)
# ============================================
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_REGION=ap-south-1
AWS_ACCOUNT_ID=your_aws_account_id

# Jobvite Documents Bucket
JOBVITE_DOCUMENTS_BUCKET=jobvite-documents

# ============================================
# Encryption Configuration (REQUIRED for Production)
# ============================================
# Generate a 32-byte key and base64 encode it:
# python -c "import secrets, base64; print(base64.b64encode(secrets.token_bytes(32)).decode())"
# If not set, will fallback to JWT_SECRET_KEY (not recommended for production)
JOBVITE_ENCRYPTION_KEY=your_32_byte_base64_encoded_key

# ============================================
# Celery Configuration (for async jobs)
# ============================================
# Redis connection string for Celery
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# ============================================
# Jobvite API Configuration (Optional - defaults provided)
# ============================================
# API credentials are stored per-tenant in the database
# These URLs can be overridden if Jobvite changes their endpoints:
# IMPORTANT: Stage URLs use api.jvistg2.com (NOT api-stg.jobvite.com which doesn't resolve)
# JOBVITE_V2_BASE_URL_STAGE=https://api.jvistg2.com/api/v2
# JOBVITE_V2_BASE_URL_PROD=https://api.jobvite.com/api/v2
# JOBVITE_ONBOARDING_BASE_URL_STAGE=https://api.jvistg2.com/api/v2
# JOBVITE_ONBOARDING_BASE_URL_PROD=https://onboarding.jobvite.com/api

# ============================================
# Jobvite Authentication Configuration
# ============================================
# Use HMAC authentication (X-JVI-API, X-JVI-SIGN, X-JVI-EPOCH) per official PDF spec
# Set to 'false' to use legacy simple headers (x-jvi-api, x-jvi-sc) during transition
JOBVITE_V2_USE_HMAC=true

# ============================================
# Jobvite Onboarding API Path Configuration
# ============================================
# Use singular paths (/process, /task, /milestone) per official PDF spec
# Set to 'false' to use plural paths (/processes, /tasks, /milestones) for backward compatibility
JOBVITE_USE_SINGULAR_ONBOARDING_PATHS=true

# ============================================
# Jobvite RSA Keys (for Onboarding API encryption)
# ============================================
# Paths to RSA key files (PEM format for private, DER/PEM for public)
# JOBVITE_CUSTOMER_PRIVATE_KEY_PATH=./keys/customer_private.pem
# JOBVITE_JOBVITE_PUBLIC_KEY_PATH=./keys/jobvite_public.der

# ============================================
# Jobvite Webhook Configuration
# ============================================
# Webhook signing key (stored encrypted in database per-tenant, but can be set here for testing)
# JOBVITE_WEBHOOK_SIGNING_KEY=your_webhook_signing_key_here

# Encryption key for at-rest encryption of API secrets
# If not set, will fallback to JWT_SECRET_KEY (not recommended for production)
JOBVITE_ENCRYPTION_KEY=your_32_byte_base64_encoded_key

# ============================================
# Monitoring & Logging
# ============================================
# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Enable structured logging
ENABLE_STRUCTURED_LOGGING=true

# ============================================
# Development/Testing
# ============================================
# Set to true to use in-memory job tracking (no Celery)
USE_IN_MEMORY_JOBS=false

# Mock Jobvite API for testing
MOCK_JOBVITE_API=false

